---
import remark42ScriptUrl from "../scripts/remark42.ts?url";

// 这里需要配置你的 Remark42 服务器地址
const REMARK_URL = import.meta.env.PUBLIC_REMARK_URL || "https://remark42.niracler.com";
const SITE_ID = import.meta.env.PUBLIC_REMARK_SITE_ID || "niracler";

// 获取当前页面的 URL 作为评论的唯一标识
const pageUrl = Astro.url.href;
---

<div class="mt-12 border-t border-[var(--color-border-subtle)] pt-6">
  <h2 class="mb-4 text-xl font-semibold text-[var(--color-text-primary)]">评论</h2>
  <div
    id="remark42"
    data-remark-host={REMARK_URL}
    data-remark-site-id={SITE_ID}
    data-remark-url={pageUrl}
  ></div>
</div>

<Fragment set:html={`<script type="module" src="${remark42ScriptUrl}" defer></script>`} />
