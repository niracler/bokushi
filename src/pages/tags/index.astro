---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const tags = [...new Set(posts.map((post) => post.data.tags).flat())];

const pageTitle = "标签索引";
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`${pageTitle} | ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main class="space-y-10">
			<h1 class="text-center text-3xl font-bold text-[var(--color-text-primary)] sm:text-4xl">{pageTitle}</h1>
			<section>
				<div class="flex flex-wrap justify-center gap-3">
					{tags.map((tag) => (
						<p class="m-0">
							<a
								href={`/tags/${tag}`}
								class="inline-flex items-center rounded-full border border-border-subtle bg-[var(--color-bg-muted)] px-4 py-2 text-sm font-medium text-[var(--color-text-primary)] transition hover:bg-accent-tint hover:text-accent"
							>
								{tag}
							</a>
						</p>
					))}
				</div>
			</section>
		</main>
		<Footer />
	</body>
</html>
